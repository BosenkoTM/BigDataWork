# Практическая работа №2. Изучение и применение различных типов NoSQL баз данных на бизнес-кейсах

---

## Цель работы
Сформировать навыки проектирования и реализации полиглотной системы хранения данных (Polyglot Persistence) для решения бизнес-задач. Студенты научатся разворачивать среду, работать с документо-ориентированными (MongoDB), колоночными (Cassandra) и графовыми (GraphDB/Neo4j) базами данных, а также применять их для построения рекомендательных систем и аналитики.

**Бизнес-кейс.** Разработка аналитического ядра для стриминговой платформы (аналог Netflix/Кинопоиск). Вам необходимо хранить каталог контента, профили пользователей, логи просмотров и граф связей для построения рекомендаций.

**Задачи:**
-  Развернуть Docker-контейнеры с необходимыми СУБД.
-  **MongoDB.** Реализовать хранение каталога контента и профилей (CRUD).
-  **Cassandra.** Реализовать запись потоковых логов (действия пользователей).
-  **GraphDB (SPARQL).** Загрузить RDF-граф знаний о фильмах и выполнить сложные поисковые запросы для рекомендательной системы.
-  Провести бизнес-анализ полученных данных.

---

## Необходимое ПО и окружение
Работа выполняется на виртуальной машине с образом **`devops_dba_25.ova`**.

**Инструменты и доступ:**
| Продукт | Тип БД | URL / Доступ | Назначение в бизнес-кейсе |
|---|---|---|---|
| **MongoDB** | Document | `http://localhost:28203` (Mongo-Express)<br>`http://localhost:28204` (Admin Mongo) | Каталог товаров/фильмов, данные пользователей. |
| **Cassandra** | Wide-Column | `http://localhost:28200` (Cassandra-Web)<br>`cqlsh` | Логирование действий, история просмотров, временные ряды. |
| **GraphDB** | Graph (RDF) | `http://localhost:7200` (или `http://localhost:28080` через Zeppelin) | Граф связей (Актер-Фильм-Жанр), рекомендательная система. |
| **Redis** | Key-Value | `http://localhost:28119` (Redis Commander) | Кэширование сессий (опционально). |

**Источник данных:**
Для выполнения работы используются открытые RDF-датасеты (Linked Open Data) по кинематографу (например, LinkedMDB или DBpedia subset), которые необходимо загрузить в GraphDB.

---

## Ход выполнения работы

### Шаг 1. Запуск инфраструктуры
-  Подключитесь к виртуальной машине.
-  Перейдите в рабочую директорию и запустите контейнеры:
    ```bash
    cd ~/Downloads/dba/nonrel/graphdb
    # Если контейнеры запущены, остановите их для чистого старта
    sudo docker compose stop
    # Запуск
    sudo docker compose start
    ```
-  Убедитесь, что веб-интерфейсы (см. таблицу выше) доступны в браузере.

### Шаг 2. Загрузка данных (ETL)
**Для GraphDB:**
-  Откройте интерфейс GraphDB.
-  Создайте репозиторий `movies_repo`.
-  Импортируйте предоставленный RDF-файл (Turtle/N-Triples) с данными о фильмах (файл находится внутри образа или скачивается по ссылке из материалов курса).

**Для MongoDB и Cassandra:**
Студент должен самостоятельно наполнить базы тестовыми данными (минимум 10-20 записей), соответствующими логике задания, используя скрипты на Python/JS или встроенные интерфейсы.

---

## Варианты индивидуальных заданий

В каждом варианте необходимо решить три подзадачи, формирующие сквозной процесс анализа данных.
*   **Задание 1 (NoSQL Operations).** Работа с MongoDB или Cassandra (администрирование, CRUD, агрегация).
*   **Задание 2 (Graph Analysis).** Сложные SPARQL-запросы к графу знаний для поиска связей.
*   **Задание 3 (Business Insight).** Аналитическая записка или вывод на основе данных (например, "В какой жанр инвестировать?").

**Вариант выбирается согласно номеру студента в списке группы.**

Задания на образовательном портале [IT-Adaptive](https://envlab.ru/mod/assign/view.php?id=466)

---

## Требования к отчетности

Работа сдается в виде ссылки на репозиторий (GitHub/GitVerse).

**Структура репозитория:**
-  **`docker-compose.yml`** — файл запуска среды.
-  **`scripts/`** — папка со скриптами (JS для Mongo, CQL для Cassandra, SPARQL запросы).
-  **`data/`** — примеры используемых данных (не загружать большие дампы, только сэмплы).
-  **`Report_Lab2.md`** — отчет о выполнении.

**Содержание отчета:**
*   **Введение.** Описание бизнес-кейса и выбранного стека технологий.
*   **Развертывание.** Скриншоты запущенных контейнеров и веб-интерфейсов.
*   **Выполнение Задания 1 (NoSQL).** Код запросов (insert, find, update) и скриншоты результатов. Обоснование выбора модели данных.
*   **Выполнение Задания 2 (GraphDB).** Текст SPARQL-запросов и скриншоты графов/таблиц с ответами.
*   **Выполнение Задания 3 (Analytics).** Бизнес-интерпретация результатов. Ответ на поставленный в варианте вопрос.
*   **Выводы.** Преимущества полиглотного подхода (почему для графа взяли GraphDB, а для логов Cassandra?).

---

## Критерии оценки

| Категория | Критерий | Баллы |
| :--- | :--- | :--- |
| **1. Инфраструктура и NoSQL (MongoDB/Cassandra)** | **6 баллов** | |
| | Успешный запуск контейнеров, доступность интерфейсов. | 2 |
| | Выполнено Задание 1: Созданы базы/коллекции, данные загружены. | 2 |
| | Выполнены CRUD операции и специфические задачи варианта (индексы, TTL и т.д.). | 2 |
| **2. Графовые базы данных (GraphDB/SPARQL)** | **6 баллов** | |
| | Данные (RDF) успешно загружены в репозиторий. | 2 |
| | SPARQL-запросы составлены синтаксически верно и возвращают корректные данные. | 4 |
| **3. Бизнес-аналитика и выводы** | **4 балла** | |
| | Проведен анализ полученных данных (Задание 3). | 2 |
| | Сделан обоснованный бизнес-вывод (инсайт), а не просто констатация факта. | 2 |
| **4. Качество отчета и репозитория** | **4 балла** | |
| | Репозиторий структурирован, есть README, код читаем. | 2 |
| | Отчет полный, содержит скриншоты, пояснения к каждому шагу. | 2 |
| **Итого** | | **20** |

```
